!function(e){var t={};function n(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(s,o,function(t){return e[t]}.bind(null,o));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=[3,4,5,6,7,8],o=s;t.NUM_ROWS=s,t.NUM_COLS=o,t.NUM_TILES=[9,16,25,36,49,64],t.MOVE_DIRECTIONS={up:-4,down:-1,left:4,right:1},t.URL_IMG="https://raw.githubusercontent.com/kastrubait/image-data/master/box",t.BG_SIZE=420},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScore=t.loadGame=t.saveGame=t.addZero=t.restart=t.soundKeys=t.tileNumber=t.rand=void 0;var s=n(0),o=n(2);t.rand=function(e,t){return e+Math.floor(Math.random()*(t-e+1))},t.tileNumber=function(e,t){const[n,o]=e,i=n*s.NUM_ROWS[t]+o+1;return 16!==i?i:0},t.soundKeys=function(e,t){if(e){const e=new Audio;e.preload="auto",e.src=t?"./public/wrong.mp3":"./public/correct.mp3",e.play()}},t.restart=function(){return{codSizeField:1,modeGame:1,solved:!1,board:[],emptyIndex:null,index:null,shuffling:!1,stack:[],moves:0,time:1,startGame:!1,numberImg:Math.floor(150*Math.random())}},t.addZero=function(e){return(parseInt(e,10)<10?"0":"")+e},t.saveGame=function(e){const{moves:t,solved:n,codSizeField:i,time:r}=e;if(n){const e={date:new Intl.DateTimeFormat("en-US").format(new Date),time:r,size:s.NUM_ROWS[i],moves:t};let n;n=localStorage.getItem("bestScore")?JSON.parse(localStorage.getItem("bestScore")):[],n.push(e),n.sort((e,t)=>e.moves>t.moves?1:-1),n.length>=8&&n.pop(),localStorage.setItem("bestScore",JSON.stringify(n))}t&&!n&&(window.localStorage.setItem("dataGame",JSON.stringify(e)),(0,o.anyMessage)("Saved successfully!")),t||(0,o.anyMessage)("Start the game, nothing to save here!!")},t.loadGame=function(){let e;return!!localStorage.getItem("dataGame")&&(localStorage.getItem("dataGame")&&(e=JSON.parse(localStorage.getItem("dataGame"))),{oldGame:e})},t.getScore=function(){return localStorage.getItem("bestScore")?JSON.parse(localStorage.getItem("bestScore")):((0,o.anyMessage)("Start the game, nothing to save here!!"),setTimeout((0,o.closeMess)(),5e3),!1)}},function(e,t,n){"use strict";function s(e){return(parseInt(e,10)<10?"0":"")+e}Object.defineProperty(t,"__esModule",{value:!0}),t.successMessage=function({moves:e,time:t}){const n=t%60,o=parseInt(t/60,10),i=document.createElement("p");i.textContent=`You solved the puzzle in ${s(o)} : ${s(n)} and ${e} moves.`;const r=document.createElement("h4");r.textContent="Congratulations!";const a=document.createElement("section");a.setAttribute("id","infoVictory"),a.append(r,i);const d=document.body.appendChild(document.createElement("div"));d.setAttribute("id","overlay"),d.append(a),document.getElementById("overlay").style.display="block"},t.showMenu=function(){const e=document.createElement("h4");e.setAttribute("id","newGame"),e.textContent="new game";const t=document.createElement("h4");t.setAttribute("id","oldGame"),t.textContent="continue game";const n=document.createElement("h4");n.setAttribute("id","saveGame"),n.textContent="save game";const s=document.createElement("h4");s.setAttribute("id","bestScore"),s.textContent="best score";const o=document.createElement("h4");o.setAttribute("id","finish"),o.textContent="auto finish";const i=document.createElement("section");i.setAttribute("id","menu"),i.append(e,t,n,s,o);const r=document.body.appendChild(document.createElement("div"));r.setAttribute("id","overlay"),r.append(i),document.getElementById("overlay").style.display="block"},t.anyMessage=function(e){const t=document.createElement("h4");t.setAttribute("id","message"),t.textContent=""+e;const n=document.body.appendChild(document.createElement("div"));n.setAttribute("id","overlay"),n.append(t),document.getElementById("overlay").style.display="block"},t.showResults=function(e){const t=document.createElement("h3");t.setAttribute("id","title"),t.textContent="        date      moves/size    time";const n=document.body.appendChild(document.createElement("div"));n.setAttribute("id","overlay"),n.append(t);for(let t=0;t<e.length;t++){const o=document.createElement("p");o.classList.add("rowStyle");const{date:i,moves:r,size:a,time:d}=e[t],c=s(r),l=s(d%60),u=s(parseInt(d/60,10));o.textContent=`${i}        ${c}/${a}       ${u}:${l}`,n.append(o)}document.getElementById("overlay").style.display="block"},t.closeMess=function(){document.getElementById("message").remove()}},function(e,t,n){"use strict";n(4);var s,o=n(7),i=(s=o)&&s.__esModule?s:{default:s},r=n(2),a=n(1);const d={codSizeField:1,modeGame:1,board:[],solved:!1,emptyIndex:null,index:null,shuffling:!1,stack:[],moves:0,time:0,startGame:!1};document.addEventListener("DOMContentLoaded",function(){const e=document.createElement("p");e.textContent="The goal of the game is to move the knuckles around the box\n   to arrange them by numbers, preferably by making as few movements as possible.";const t=document.createElement("h1");t.textContent="Gem Puzzle";const n=document.createElement("h2");n.setAttribute("id","timer"),n.textContent=`Time ${(0,a.addZero)(0)} : ${(0,a.addZero)(0)}`;const s=document.createElement("span");s.setAttribute("id","moves");const o=document.createElement("button");o.classList.add("info-panel"),o.setAttribute("id","undo"),o.textContent="UNDO";const c=document.createElement("button");c.classList.add("info-panel"),c.setAttribute("id","sound"),c.style.width="95px",c.textContent="Sound ON";const l=document.createElement("button");l.classList.add("info-panel"),l.setAttribute("id","pause"),l.textContent="MENU";const u=document.createElement("span");u.classList.add("info"),u.append(o,c,l);const m=document.createElement("section");m.classList.add("info"),m.append(s,u);const h=document.createElement("div");h.classList.add("img");const f=document.body.appendChild(document.createElement("div"));f.classList.add("game-board");for(let e=0;e<16;e++){const t=document.createElement("div");t.setAttribute("data-index",e),f.appendChild(t)}const g=document.createElement("button");g.classList.add("settings-panel"),g.classList.add("settings-panel-active"),g.setAttribute("id","classic"),g.textContent="CLASSIC GAME";const p=document.createElement("button");p.classList.add("settings-panel"),p.setAttribute("id","picture"),p.textContent="PICTURE PUZZLE";const y=document.createElement("span");y.setAttribute("id","label"),y.textContent="Select MODE:  ";const b=document.createElement("section");b.classList.add("settings"),b.append(y,g,p),document.querySelector("#root").append(t,e,n,m,f,b,h),new i.default(d).getFifteens(),(0,r.showMenu)()}())},function(e,t,n){var s=n(5),o=n(6);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1};s(o,i);e.exports=o.locals||{}},function(e,t,n){"use strict";var s,o=function(){return void 0===s&&(s=Boolean(window&&document&&document.all&&!window.atob)),s},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function a(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function d(e,t){for(var n={},s=[],o=0;o<e.length;o++){var i=e[o],d=t.base?i[0]+t.base:i[0],c=n[d]||0,l="".concat(d," ").concat(c);n[d]=c+1;var u=a(l),m={css:i[1],media:i[2],sourceMap:i[3]};-1!==u?(r[u].references++,r[u].updater(m)):r.push({identifier:l,updater:p(m,t),references:1}),s.push(l)}return s}function c(e){var t=document.createElement("style"),s=e.attributes||{};if(void 0===s.nonce){var o=n.nc;o&&(s.nonce=o)}if(Object.keys(s).forEach((function(e){t.setAttribute(e,s[e])})),"function"==typeof e.insert)e.insert(t);else{var r=i(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var l,u=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function m(e,t,n,s){var o=n?"":s.media?"@media ".concat(s.media," {").concat(s.css,"}"):s.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var i=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function h(e,t,n){var s=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}var f=null,g=0;function p(e,t){var n,s,o;if(t.singleton){var i=g++;n=f||(f=c(t)),s=m.bind(null,n,i,!1),o=m.bind(null,n,i,!0)}else n=c(t),s=h.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return s(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;s(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=d(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var s=0;s<n.length;s++){var o=a(n[s]);r[o].references--}for(var i=d(e,t),c=0;c<n.length;c++){var l=a(n[c]);0===r[l].references&&(r[l].updater(),r.splice(l,1))}n=i}}}},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(8)),o=a(n(9)),i=(n(0),n(1)),r=n(2);function a(e){return e&&e.__esModule?e:{default:e}}t.default=class{constructor(e){this.state=e}getFifteens(){let e=!0,t=!0,n=new s.default(this.state),a=n.getCurrentState(),d=new o.default(a);d.render(),window.addEventListener("click",c=>{const l=c.target.getAttribute("data-index");if(l&&!n.canMoveTile(l)&&(0,i.soundKeys)(e,1),l&&n.moveTile(l)){(0,i.soundKeys)(e,0),a=n.getCurrentState(),d=new o.default({...a,time:this.time}),d.render();const{modeGame:t}=a;document.querySelector(".img").style.display=t?"none":"block"}if("undo"===c.target.getAttribute("id")){n.undo()||(a=n.getCurrentState(),d=new o.default({...a,time:this.time}),d.render())}if("sound"===c.target.getAttribute("id")){const t=document.querySelector("#sound");e=!e,t.textContent=e?"Sound ON":"Sound OFF"}if("pause"===c.target.getAttribute("id")&&(t=!t,(0,r.showMenu)()),"victory"===c.target.getAttribute("id")&&((0,r.successMessage)(n.getCurrentState()),this.gameStart=!1),"newGame"===c.target.getAttribute("id")){document.getElementById("overlay").remove(),t=!1;const e=(0,i.restart)();n=new s.default({...e}),a=n.getCurrentState(),d=new o.default(a),d.render();const{modeGame:r,time:c}=a;this.time=c;const l=setInterval(()=>{if(t)clearInterval(l);else{this.time+=1;const e=this.time%60,t=Math.floor(this.time/60);document.querySelector("#timer").textContent=`Time ${(0,i.addZero)(t)} : ${(0,i.addZero)(e)}`}},1e3);document.querySelector(".img").style.display=r?"none":"block",document.querySelector("#classic").classList.add("settings-panel-active"),document.querySelector("#picture").classList.remove("settings-panel-active")}if("saveGame"===c.target.getAttribute("id")){const e=document.getElementById("overlay");e&&e.remove(),this.gameStart=!1,a=n.getCurrentState(),a={...a,time:this.time,gameStart:!1},(0,i.saveGame)(a)}if("oldGame"===c.target.getAttribute("id")){const e=document.getElementById("overlay");e&&e.remove(),this.gameStart=!0,t=!1;const{oldGame:a}=(0,i.loadGame)();if(a){n=new s.default({...a}),d=new o.default(a),d.render();const{modeGame:e,time:r}=a;this.time=r;const c=setInterval(()=>{if(t)clearInterval(c);else{this.time+=1;const e=this.time%60,t=Math.floor(this.time/60);document.querySelector("#timer").textContent=`Time ${(0,i.addZero)(t)} : ${(0,i.addZero)(e)}`}},1e3);e?(document.querySelector(".img").style.display="none",document.querySelector("#classic").classList.add("settings-panel-active"),document.querySelector("#picture").classList.remove("settings-panel-active")):(document.querySelector(".img").style.display="block",document.querySelector("#picture").classList.add("settings-panel-active"),document.querySelector("#classic").classList.remove("settings-panel-active"))}else(0,r.anyMessage)("No saves yet! Click to continue!")}if("bestScore"===c.target.getAttribute("id")){const e=document.getElementById("overlay");e&&e.remove();const t=(0,i.getScore)();(0,r.showResults)(t)}if("classic"===c.target.getAttribute("id")){this.state.modeGame=1,this.state.gameStart=!0,this.state.stack=[],n=new s.default(this.state),a=n.getCurrentState(),d=new o.default(a),d.render();const{modeGame:e,time:t}=a;this.time=t,e&&document.querySelector(".img")&&(document.querySelector(".img").style.display="none"),document.querySelector("#classic").classList.add("settings-panel-active"),document.querySelector("#picture").classList.remove("settings-panel-active")}if("picture"===c.target.getAttribute("id")){this.state.numberImg=Math.floor(150*Math.random()),this.gameStart=!0,this.state.modeGame=0,this.state.gameStart=!0,this.state.stack=[],n=new s.default(this.state),a=n.getCurrentState(),d=new o.default(a),d.render();const{modeGame:e,time:t}=a;this.time=t,e||(document.querySelector(".img").style.display="block"),document.querySelector("#picture").classList.add("settings-panel-active"),document.querySelector("#classic").classList.remove("settings-panel-active")}if("overlay"===c.target.getAttribute("id")){const e=document.getElementById("overlay");e&&e.remove(),t=!1,this.timeId=setInterval(()=>{if(t)clearInterval(this.timeId);else{this.time+=1;const e=this.time%60,t=Math.floor(this.time/60);document.querySelector("#timer").textContent=`Time ${(0,i.addZero)(t)} : ${(0,i.addZero)(e)}`}},2e3)}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),o=n(1);class i{constructor({codSizeField:e,moves:t,time:n,board:s,modeGame:o,emptyIndex:i,shuffling:r,stack:a,startGame:d,numberImg:c}){this.codSizeField=e,this.modeGame=o,this.board=s,this.emptyIndex=i,this.shuffling=r,this.stack=a,this.moves=t,this.time=n,this.startGame=d,this.numberImg=c}static getNewBoard(e){return Array(s.NUM_TILES[e]).fill(0).map((t,n)=>[Math.floor(n/s.NUM_ROWS[e]),n%s.NUM_COLS[e]])}isSolved(){return!this.board.some((e,t)=>{const n=(0,o.tileNumber)(e,this.codSizeField);return this.shuffling=JSON.stringify(this.board)===JSON.stringify(this.stack[0]),n>0&&n-1!==t})}static getEmptyIndex(e,t){let n=null;for(let s=0;s<e.length;s++)0===(0,o.tileNumber)(e[s],t)&&(n=s);return n}static swap(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}static solvable(e,t){let n=0;for(let s=1;s<e.length-1;s++)for(let i=s-1;i>=0;i--)(0,o.tileNumber)(e[i],t)>(0,o.tileNumber)(e[s],t)&&(n+=1);return!(n%2)}static moveInDirection(e){const t=s.MOVE_DIRECTIONS[e];return this.emptyIndex+t}canMoveTile(e){if(e<0||e>=s.NUM_TILES[this.codSizeField])return!1;const t=Math.floor(e/s.NUM_ROWS[this.codSizeField]),n=e%s.NUM_COLS[this.codSizeField],o=Math.floor(this.emptyIndex/s.NUM_ROWS[this.codSizeField]),i=this.emptyIndex%s.NUM_COLS[this.codSizeField];return t===o?1===Math.abs(n-i):n===i&&1===Math.abs(t-o)}moveTile(e){if(0===this.stack.length&&this.stack.push(i.getNewBoard(this.codSizeField)),this.isSolved())return!1;if(!this.canMoveTile(e))return!1;const t=[...this.board[this.emptyIndex]],n=[...this.board[e]],s=[...this.board];return s[this.emptyIndex]=n,s[e]=t,this.shuffling||(this.stack.push(this.board),this.moves+=1),this.board=s,this.index=this.emptyIndex,this.emptyIndex=i.getEmptyIndex(this.board,this.codSizeField),!0}undo(){return this.stack.length>1&&0!==this.moves&&(this.board=this.stack.pop(),this.moves-=1,this.emptyIndex=i.getEmptyIndex(this.board,this.codSizeField)),!1}getCurrentState(){if(0===this.moves&&!this.startGame){const e=i.getNewBoard(this.codSizeField).sort(()=>Math.random()-.5);i.solvable(e,this.codSizeField)||i.swap(e,0,1),this.board=e,0===this.stack.length&&this.stack.push(i.getNewBoard(this.codSizeField)),this.emptyIndex=i.getEmptyIndex(this.board,this.codSizeField),this.index=i.getEmptyIndex(this.board,this.codSizeField),this.solved=this.isSolved(),this.startGame=!0}return{codSizeField:this.codSizeField,modeGame:this.modeGame,emptyIndex:this.emptyIndex,index:this.index,board:this.board,moves:this.moves,time:this.time,stack:this.stack,solved:this.isSolved(),shuffling:this.shuffling,startGame:this.startGame,numberImg:this.numberImg}}}t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),o=n(2),i=n(0);t.default=class{constructor(e){this.stateCurrentGames=e}render(){const{board:e,solved:t,codSizeField:n,modeGame:r,moves:a,numberImg:d}=this.stateCurrentGames,c=document.querySelector("div");c.style.backgroundColor="rgba(151, 35, 132, 0.816)",t&&(c.style.backgroundColor="rgb(218, 165, 32)",(0,s.saveGame)(this.stateCurrentGames),(0,o.successMessage)(this.stateCurrentGames)),document.querySelector("#moves").textContent="Moves "+a;const l=i.NUM_ROWS[n];if(!r){const e=document.querySelector(".img");e.style.display="block",e.style.background=`url(${i.URL_IMG}/${d}.jpg)`,e.style.backgroundSize=Math.floor(i.BG_SIZE/l)+"px",e.style.width=Math.floor(i.BG_SIZE/l)+"px",e.style.height=Math.floor(i.BG_SIZE/l)+"px",e.style.display="none"}for(let t,o=0;o<e.length;o++){if(t=c.childNodes[o],t.dataIndex=o,r){if(0!==(0,s.tileNumber)(e[o],n)){t.removeAttribute("style");const i=Math.floor(o/l)*(100/l),r=o%l*(100/l);t.style.top=i+"%",t.style.left=r+"%",t.style.width=75/l-1+"%",t.style.height=75/l-1+"%",t.textContent=(0,s.tileNumber)(e[o],n)}}else{const r=100*e[o][1],a=100*Math.floor(e[o][0]);t.style.background=`url(${i.URL_IMG}/${d}.jpg)`,t.style.backgroundSize=i.BG_SIZE+"px",t.style.backgroundPosition=`-${r}px -${a}px`,t.textContent="",t.style.visibility=0!==(0,s.tileNumber)(e[o],n)?"visible":"hidden"}t.style.visibility=0!==(0,s.tileNumber)(e[o],n)?"visible":"hidden"}}}}]);
//# sourceMappingURL=main.js.map